global
    daemon
    maxconn 256
    debug

defaults
    timeout connect 5000ms
    timeout client 5000ms
    timeout server 5000ms
    log global

listen app 0.0.0.0:80
    option httpclose
    option forwardfor
    balance roundrobin

    stats enable
    stats auth admin:password
    stats uri /haproxy?stats

{{range gets "/owncloud/*"}}
    {{$data := json .Value}}
    server {{$data.id}} {{$data.ip}} check
{{end}}
